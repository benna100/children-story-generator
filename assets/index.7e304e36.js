(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function A(){}function te(e){return e()}function X(){return Object.create(null)}function L(e){e.forEach(te)}function ce(e){return typeof e=="function"}function ne(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let F;function J(e,t){return F||(F=document.createElement("a")),F.href=t,e===F.href}function ue(e){return Object.keys(e).length===0}function h(e,t){e.appendChild(t)}function x(e,t,n){e.insertBefore(t,n||null)}function b(e){e.parentNode.removeChild(e)}function g(e){return document.createElement(e)}function q(e){return document.createTextNode(e)}function S(){return q(" ")}function fe(){return q("")}function K(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function f(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function pe(e){return Array.from(e.childNodes)}function de(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function O(e,t){e.value=t==null?"":t}function v(e,t,n,o){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}let G;function j(e){G=e}const C=[],Q=[],z=[],W=[],me=Promise.resolve();let H=!1;function he(){H||(H=!0,me.then(oe))}function M(e){z.push(e)}const R=new Set;let T=0;function oe(){const e=G;do{for(;T<C.length;){const t=C[T];T++,j(t),ge(t.$$)}for(j(null),C.length=0,T=0;Q.length;)Q.pop()();for(let t=0;t<z.length;t+=1){const n=z[t];R.has(n)||(R.add(n),n())}z.length=0}while(C.length);for(;W.length;)W.pop()();H=!1,R.clear(),j(e)}function ge(e){if(e.fragment!==null){e.update(),L(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(M)}}const B=new Set;let _e;function re(e,t){e&&e.i&&(B.delete(e),e.i(t))}function ye(e,t,n,o){if(e&&e.o){if(B.has(e))return;B.add(e),_e.c.push(()=>{B.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function be(e){e&&e.c()}function se(e,t,n,o){const{fragment:r,on_mount:s,on_destroy:i,after_update:p}=e.$$;r&&r.m(t,n),o||M(()=>{const c=s.map(te).filter(ce);i?i.push(...c):L(c),e.$$.on_mount=[]}),p.forEach(M)}function ie(e,t){const n=e.$$;n.fragment!==null&&(L(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function we(e,t){e.$$.dirty[0]===-1&&(C.push(e),he(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function le(e,t,n,o,r,s,i,p=[-1]){const c=G;j(e);const l=e.$$={fragment:null,ctx:null,props:s,update:A,not_equal:r,bound:X(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:X(),dirty:p,skip_bound:!1,root:t.target||c.$$.root};i&&i(l.root);let a=!1;if(l.ctx=n?n(e,t.props||{},(m,E,...I)=>{const d=I.length?I[0]:E;return l.ctx&&r(l.ctx[m],l.ctx[m]=d)&&(!l.skip_bound&&l.bound[m]&&l.bound[m](d),a&&we(e,m)),E}):[],l.update(),a=!0,L(l.before_update),l.fragment=o?o(l.ctx):!1,t.target){if(t.hydrate){const m=pe(t.target);l.fragment&&l.fragment.l(m),m.forEach(b)}else l.fragment&&l.fragment.c();t.intro&&re(e.$$.fragment),se(e,t.target,t.anchor,t.customElement),oe()}j(c)}class ae{$destroy(){ie(this,1),this.$destroy=A}$on(t,n){const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!ue(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}async function Z({prompt:e,fake:t}){if(t)return"Ingeborg m\xF8der en delfin der kan spille guitar. Delfinen spiller en melodi, og Ingeborg synes, at det er den smukkeste musik, hun nogensinde har h\xF8rt. Hun sp\xF8rger delfinen, om den kan l\xE6re hende at spille guitar. Delfinen svarer, at det kan den godt. S\xE5 Ingeborg og delfinen begynder at spille guitar sammen. Og Ingeborg synes, at det er s\xE5 sjovt, at hun aldrig vil stoppe igen.";let n=sessionStorage.getItem("OPENAI_KEY");if(!(n&&n!=="null"&&n!=="")){const i=window.prompt("Enter your OpenAI api key");i?(sessionStorage.setItem("OPENAI_KEY",i),n=i):(alert("Please input a prompt"),window.location.reload())}const s=await(await fetch("https://api.openai.com/v1/completions",{headers:{"content-type":"application/json",Authorization:`Bearer ${n}`},method:"post",body:JSON.stringify({model:"text-davinci-002",prompt:e,temperature:0,max_tokens:e.length*4})})).json();return console.log(s),s.choices[0].text&&s.choices[0].text.trim()}async function xe({prompt:e,prefix:t="",suffix:n="",fake:o}){return new Promise((r,s)=>{if(o)return r("https://daisyui.com/tailwind-css-component-card-1.jpg");console.log(sessionStorage.getItem("STADIFF_KEY"));let i=sessionStorage.getItem("STADIFF_KEY");if(!(i&&i!=="null"&&i!=="")){const a=window.prompt("Enter your stable diffusion api key");a?(sessionStorage.setItem("STADIFF_KEY",a),i=a):(alert("Please input a prompt"),window.location.reload())}const c=new URLSearchParams;c.append("prompt",e),c.append("steps","50"),c.append("height","512"),c.append("guidance","7.5"),c.append("sampler","k_lms"),c.append("width","512"),fetch("https://dezgo.p.rapidapi.com/text2image",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded","X-RapidAPI-Key":i,"X-RapidAPI-Host":"dezgo.p.rapidapi.com"},body:c}).then(a=>a.blob()).then(a=>{const m=URL.createObjectURL(a);console.log("got a new url",m),r(m)}).catch(a=>{console.error(a),s(a)})})}function ke(e){let t;return{c(){t=g("button"),t.innerHTML='<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Vent venligst...',f(t,"class","btn btn-info")},m(n,o){x(n,t,o)},p:A,d(n){n&&b(t)}}}function Se(e){let t,n,o;return{c(){t=g("button"),t.textContent="Generer din historie",f(t,"class","btn btn-primary")},m(r,s){x(r,t,s),n||(o=K(t,"click",e[6]),n=!0)},p:A,d(r){r&&b(t),n=!1,o()}}}function ee(e){let t,n,o,r,s,i,p,c;return{c(){t=g("div"),t.textContent="Din historie:",n=S(),o=g("div"),r=g("img"),i=S(),p=g("p"),c=q(e[5]),f(t,"class","divider mb-10"),J(r.src,s=e[4])||f(r,"src",s),f(r,"class","w-full sm:w-1/2 ml-2 mr-4 sm:float-right"),f(p,"class","text-3xl p-2"),v(p,"line-height","2.5rem"),v(p,"font-size","1.6rem"),v(p,"white-space","break-spaces"),f(o,"class","p-8"),v(o,"margin","0 auto"),v(o,"overflow","auto"),v(o,"min-height","400px"),v(o,"max-width","800px")},m(l,a){x(l,t,a),x(l,n,a),x(l,o,a),h(o,r),h(o,i),h(o,p),h(p,c)},p(l,a){a&16&&!J(r.src,s=l[4])&&f(r,"src",s),a&32&&de(c,l[5])},d(l){l&&b(t),l&&b(n),l&&b(o)}}}function ve(e){let t,n,o,r,s,i,p,c,l,a,m,E,I,d,N,P,$,w,U;function V(u,y){return u[3]?ke:Se}let D=V(e),k=D(e),_=e[4]&&ee(e);return{c(){t=g("h1"),t.textContent="Generer din egen b\xF8rnebog \u{1F4D6}",n=S(),o=g("div"),r=g("p"),r.textContent="Generer en historie om",s=S(),i=g("input"),p=S(),c=g("p"),c.textContent="Barnets alder er",l=S(),a=g("input"),m=S(),E=g("p"),E.textContent="Den skal handle om",I=S(),d=g("textarea"),N=S(),k.c(),P=S(),_&&_.c(),$=fe(),f(t,"class","text-4xl pt-10 pb-10 text-center p-2"),f(r,"class",""),f(i,"class","h-8 input text-secondary-content mb-6 bg-secondary w-full"),f(i,"type","text"),f(i,"placeholder","fx. Valdemar"),f(a,"class","input text-secondary-content mb-6 bg-secondary w-full"),f(a,"type","text"),f(a,"placeholder","fx. 5"),f(d,"class","textarea block bg-secondary h-36 mb-10 w-full"),f(d,"name",""),f(d,"id",""),f(d,"cols","30"),f(d,"rows","10"),f(d,"placeholder","fx. m\xF8der en drage med en sjov hat p\xE5"),f(o,"class","p-6 text-2xl w-full"),v(o,"margin","0 auto"),v(o,"max-width","800px")},m(u,y){x(u,t,y),x(u,n,y),x(u,o,y),h(o,r),h(o,s),h(o,i),O(i,e[0]),h(o,p),h(o,c),h(o,l),h(o,a),O(a,e[1]),h(o,m),h(o,E),h(o,I),h(o,d),O(d,e[2]),h(o,N),k.m(o,null),x(u,P,y),_&&_.m(u,y),x(u,$,y),w||(U=[K(i,"input",e[7]),K(a,"input",e[8]),K(d,"input",e[9])],w=!0)},p(u,[y]){y&1&&i.value!==u[0]&&O(i,u[0]),y&2&&a.value!==u[1]&&O(a,u[1]),y&4&&O(d,u[2]),D===(D=V(u))&&k?k.p(u,y):(k.d(1),k=D(u),k&&(k.c(),k.m(o,null))),u[4]?_?_.p(u,y):(_=ee(u),_.c(),_.m($.parentNode,$)):_&&(_.d(1),_=null)},i:A,o:A,d(u){u&&b(t),u&&b(n),u&&b(o),k.d(),u&&b(P),_&&_.d(u),u&&b($),w=!1,L(U)}}}const Y=!1;function $e(e,t,n){let o="",r="",s="",i=!1,p="",c="";const l=async()=>{n(3,i=!0);const I=`Det f\xF8lgende er en historie til en ${r} \xE5rig barn, barnet hedder ${o} som ${s}. 
`;console.log("original prompt: ",I);const d=await Z({prompt:I,fake:Y}).catch(w=>{alert(w)});n(5,c=d.replaceAll(". ",`.

`)),console.log("story: ",c);const N=`${d} 
One line summary: `,P=await Z({prompt:N,fake:Y}).catch(w=>{alert(w)});console.log("Summary: ",P);const $=`${P} Children's Book Illustration, taylor barron, basia tran`.replace(o,"a child");console.log($),console.log("Image prompt: ",$),xe({prompt:$,fake:Y}).then(w=>{n(4,p=w),n(3,i=!1)}).catch(w=>{alert(w)})};function a(){o=this.value,n(0,o)}function m(){r=this.value,n(1,r)}function E(){s=this.value,n(2,s)}return[o,r,s,i,p,c,l,a,m,E]}class Ee extends ae{constructor(t){super(),le(this,t,$e,ve,ne,{})}}function Ie(e){let t,n,o;return n=new Ee({}),{c(){t=g("main"),be(n.$$.fragment),f(t,"data-theme","retro"),v(t,"min-height","100vh")},m(r,s){x(r,t,s),se(n,t,null),o=!0},p:A,i(r){o||(re(n.$$.fragment,r),o=!0)},o(r){ye(n.$$.fragment,r),o=!1},d(r){r&&b(t),ie(n)}}}class Ae extends ae{constructor(t){super(),le(this,t,null,Ie,ne,{})}}new Ae({target:document.getElementById("app")});
